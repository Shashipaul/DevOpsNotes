<!DOCTYPE html>
<html>
<head>
<style>
table, th, td {
  border: 1px solid white;
  border-collapse: collapse;
}
th, td {
  background-color: #96D4D4;
}
div.a {
  text-align: justify;
  text-justify: inter-word;
}
div.b {
  background-color: lightgrey;
  width: 300px;
  border: 2px solid green;
  padding: 10px;
  margin: 20px;
}
</style>
</head>
<body>

<h2>docker</h2>

<p>docker Training</p>

<table style="width:100%">
  <tr>
    <th>S No</th>
    <th>Title</th> 
    <th>Description</th>
	<th>Steps</th>
  </tr>
  <tr>
    <td>1</td>
    <td>docker Architecture</td>
    <td><br>
	<ul>
			<li>OverlayFS:<br>
			    &ensp;&ensp;&ensp;* Docker inspect -(Container Name)-<br>
			</li>
			</ul>
		
	</td>
	<td style="width:20%">
	<p><strong><b>OverlayFS_1 :</b></strong></p>
	<img src="images\OverlayFS_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>OverlayFS_2 :</b></strong></p>
	<img src="images\OverlayFS_2.PNG" alt="cluster" width="500" height="250">
  </tr>  
  <tr>
    <td>2</td>
    <td>Installation of docker</td>
	<td><ul>			
			<li>Installation Steps:<br>
				&ensp;&ensp;&ensp;* sudo yum install -y yum-utils<br>
			    &ensp;&ensp;&ensp;* sudo yum-config-manager \ --add-repo \ https://download.docker.com/linux/centos/docker-ce.repo<br>
				&ensp;&ensp;&ensp;* ls -l /etc/yum.repo.d/docker-ca.repo<br>
				&ensp;&ensp;&ensp;* yum install docker-ce -y<br>
				&ensp;&ensp;&ensp;* systemctl start docker<br>
				&ensp;&ensp;&ensp;* systemctl enable docker<br>
				&ensp;&ensp;&ensp;* docker info | grep -i server<br>
				&ensp;&ensp;&ensp;* docker version<br>	
				&ensp;&ensp;&ensp;* docker info<br>					
				</li>
			</ul>	
	</td>
	<td>		
  </tr>  
  <tr>
    <td style="width:5%">3</td>
    <td style="width:10%">Learning the Basics of docker</td>
    <td style="width:45%"><ul>
			    <li>docker Images and Containers :<br>
			    &ensp;&ensp;&ensp;* docker Images >>>> <em style="color:blue;">List Images avlible on servers</em><br>
				&ensp;&ensp;&ensp;* docker ps <br>
				&ensp;&ensp;&ensp;* docker search mysql >>>> <em style="color:blue;">Search for the Images</em><br>
				&ensp;&ensp;&ensp;* docker pull mysql:5.6 >>>> <em style="color:blue;">Pull docker images</em><br>
				&ensp;&ensp;&ensp;* ls -ld /var/lib/docker/ >>>>><em style="color:blue;">Location of the image pulled</em><br>
				&ensp;&ensp;&ensp;* docker history -(Image ID)- >>>>>> <em style="color:blue;">List information about the image</em>>>>>><em style="color:Blue;">Reference</em> : docker_1<br>
				&ensp;&ensp;&ensp;* docker version<br>				
				</li>
			</ul>
			<ul>
			    <li>How to create Containers :<br>
			    &ensp;&ensp;&ensp;* docker Images >>>> <em style="color:blue;">List Images avlible on servers</em><br>	
				&ensp;&ensp;&ensp;* docker run -it --name=test centos:7 >>> <em style="color:blue;">Create docker Containers from image and login into it (i: Image t: term)</em><br>
				&ensp;&ensp;&ensp;* docker ps >>>> <em style="color:blue;">Check the status of docker</em><br>
				&ensp;&ensp;&ensp;* docker ps -a >>>> <em style="color:blue;">Check the status of docker</em><br>
				&ensp;&ensp;&ensp;* docker top -(Container Name)->>>> <em style="color:blue;">Show us the container processes</em><br>		
				&ensp;&ensp;&ensp;* docker start -(Container Name)->>>> <em style="color:blue;">Start docker from the container</em><br>
				&ensp;&ensp;&ensp;* docker stats -(Container Name)->>>> <em style="color:blue;">Stats of running docker</em><br>	
                &ensp;&ensp;&ensp;* docker attach -(Container Name)->>>> <em style="color:blue;">Login inside container where bin/bash shell avalible</em><br>	
				&ensp;&ensp;&ensp;* Press (Ctl + p + q) >>>> <em style="color:blue;">To logout from the container</em><br>	
				&ensp;&ensp;&ensp;* docker stop -(Container Name)->>>> <em style="color:blue;">Stop docker from the container</em><br>	
			    &ensp;&ensp;&ensp;* docker system df >>>> <em style="color:blue;">Storage resource utlization by docker</em><em style="color:Blue;"> Reference</em> : docker_3<br>
				&ensp;&ensp;&ensp;* docker inspect -(Container Name)->>>> <em style="color:blue;">Inspect the container details</em></em><em style="color:Blue;"> Reference</em> : docker_4<br>				
				</li></ul>
				<ul><li>How to setup service container (ngenx):			
		      <p>Create the location of new registry>>>> <b>vim /etc/sysconfig/docker</b></em>>>>>><em style="color:Blue;">Reference</em> : docker_2</p>
			  <p>docker inspect network bridge | grep -i subnet >>>> <b>Check for the status of brige subnet</b><br>
			  &ensp;&ensp;&ensp;* docker run -d --name=webserver -(Container ID)->>>> <em style="color:blue;">Run the service container ID</em><br>
			  &ensp;&ensp;&ensp;* docker exec -it webserver /bin/bash>>> <em style="color:blue;">Login to container</em><br>
			  &ensp;&ensp;&ensp;* docker rm -(Container name)- >>> <em style="color:blue;">Delete container</em><br>
			  &ensp;&ensp;&ensp;* docker logs -(Container name)- >>> <em style="color:blue;">Check for the docker container logs</em><br>
			  &ensp;&ensp;&ensp;* docker run -d --name=db -e MYSQL_ROOT_PASSWORD=root --cpus=0.5 mysql:5.6 >>> <em style="color:blue;">Create docker with cpu</em><br>
			  &ensp;&ensp;&ensp;* docker run -it --name=demo --restart=always centos:7 >>> <em style="color:blue;">-- restart means whenever reboot happens it will automatically start docker container</em><br>
			  &ensp;&ensp;&ensp;* docker start $(docker ps -q -a) >>> <em style="color:blue;">Starting docker container using single command</em><br>
			  </li></ul>
			  <ul>
			    <li>Example :<br>
				  &ensp;&ensp;&ensp;* docker run -d --name=db -e MYSQL_ROOT_PASSWORD=root mysql:5.6<br> 
				  &ensp;&ensp;&ensp;* docker inspect db | grep -i ipaddress >>>> Check IP address of docker container<br>				  
				 </li></ul>
			  
	</td>
	<td style="width:20%">
	<p><strong><b>docker_1:</b></strong></p>
	<img src="images\docker_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>docker_2:</b></strong></p>
	<img src="images\docker_2.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>docker_3:</b></strong></p>
	<img src="images\docker_3.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>docker_4:</b></strong></p>
	<img src="images\docker_4.PNG" alt="cluster" width="500" height="150">
	<p><strong><b>docker_5:</b></strong></p>
	<img src="images\docker_5.PNG" alt="cluster" width="500" height="150">
	</td>		
  </tr> 
    <tr>
    <td style="width:5%">4</td>
    <td style="width:10%">How to Expose Container for world Network</td>
    <td style="width:45%"><p>Need to create port forwarding for container with Docker Host Port :</p>
	<ul>
			<li>Instructions (Port Mapping):<br>
			  &ensp;&ensp;&ensp;* docker run -d -p 8080:80 --name=webserver1 ngenx:latest >>> -p use to forward port<br>
			  &ensp;&ensp;&ensp;* netstat -tnIp | grep -w 8080<br>
			  &ensp;&ensp;&ensp;* docker run -d -p 172.31.12.137:8080:80 --name=webserver1 ngenx:latest >>><div class=a>&ensp;&ensp;&ensp;&ensp; bind with IP address and -p use to forward port</em>>>>><em style="color:Blue;">Reference</em> : docker_5</p></div>
			  &ensp;&ensp;&ensp;* docker run -d -p 0.0.0.0:8080:80 --name=webserver1 ngenx:latest >>><div class=a>&ensp;&ensp;&ensp;&ensp; bind with default IP address and -p use to forward port (manual)</em>>>>><em style="color:Blue;">Reference</em> : docker_5</p></div>
			  &ensp;&ensp;&ensp;* docker run -d -p 8087:8080 -p 8088:80 -n=webserver6 ngenx:latest<br>
			  &ensp;&ensp;&ensp;* docker stop $(docker ps -q -a) >>> <em style="color:blue;"><b>stop all running docker</b></em><br>
			  &ensp;&ensp;&ensp;* docker rm $(docker ps -q -a) >>> <em style="color:blue;"><b>remove all running docker</b></em><br>
			  &ensp;&ensp;&ensp;* docker run -d -P --name=webserver6 ngenx:latest >>> <em style="color:blue;"><b> -P : Bind any avalible port</b></em><br>
			</li>
			</ul>
		
	</td>
	<td style="width:20%"></td>
  </tr>  
   <tr>
    <td style="width:5%">5</td>
    <td style="width:10%">Build Docker Image</td>
    <td style="width:45%"><p>Create custom Images with the base images :</p>
	<ul>
			<li>Instructions (Docker Image):<br>
			  &ensp;&ensp;&ensp;* docker images<br>
			  &ensp;&ensp;&ensp;* find /var/lib/docker/ -name run.sh >>> <em style="color:blue;"><b>check the writing layer of the docker</b></em><br>
			  &ensp;&ensp;&ensp;* docker commit test centos.v1 >>> <em style="color:blue;"><b>commit changes in existing image</b></em><br>	
			  &ensp;&ensp;&ensp;* docker run -it --name=test centos.v1 >>> <em style="color:blue;"><b>create container from base image</b></em>>>><em style="color:Red;">Reference : <b>docker_6</b></em><br>
			  &ensp;&ensp;&ensp;* docker rmi -(image name)- >>> <em style="color:blue;"><b>Delete image</b></em><br>
			  &ensp;&ensp;&ensp;* docker save centos:apache > apache.tar >>> <em style="color:blue;"><b>backup the base image with change layer</b></em><br>
			  &ensp;&ensp;&ensp;* docker rmi -f $(docker iamges -q)<br>
			  &ensp;&ensp;&ensp;* docker load -i apache.tar >>> <em style="color:blue;"><b>create container form packed tar file</b></em><br>
			  &ensp;&ensp;&ensp;* ls /var/lib/docker2/overlay2/ <em style="color:blue;"><b>list the image data. To  check this information need overlay2 path for the docker
			  </b></em><br>
			</li>
			</ul>
		
	</td>
	<td style="width:20%">
	<p><strong><b>docker_6:</b></strong></p>
	<img src="images\docker_6.PNG" alt="cluster" width="500" height="250"></td>
  </tr>  
  	<td style="width:20%"></td>
  </tr>  
   <tr>
    <td style="width:5%">6</td>
    <td style="width:10%">Docker Volume</td>
    <td style="width:45%"><p>Create Volume to write data</p>
	<ul>
			<li>Instructions (Docker Image):<br>
			  &ensp;&ensp;&ensp;* docker images<br>
			  &ensp;&ensp;&ensp;* getenforce >>> check the status<br>
			  &ensp;&ensp;&ensp;* setenforce 0>>> disable setdenforce before mounting volume(if we keep enabled will not able to write in host machine)<em style="color:Red;">Reference : <b>Volume_1</b></em><br>
			  &ensp;&ensp;&ensp;* mkdir volume<br>
			  &ensp;&ensp;&ensp;* docker run -d -v /volume:/var/lib/mysql --name=db -e MYSQL_ROOT_PASSWORD=redhat mysql:5.6<br>
			  &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker exect --it db /var/bash<br>
			  &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* mysql -u root -p<br>
			  </li>
			  <li>Create Volume :<br>
			  &ensp;&ensp;&ensp;* docker volume ls<br>
			  &ensp;&ensp;&ensp;* docker volume create mysqlvol<br>
			  &ensp;&ensp;&ensp;* docker run -d -v mysqlvol:/var/lib/mysql --name=db -e MYSQL_ROOT_PASSWORD=redhat mysql:5.6<br>					  
			  &ensp;&ensp;&ensp;* docker inspect db <em style="color:Red;">Reference : <b>Volume_2</b></em><br>
			  &ensp;&ensp;&ensp;* docker rm  mysqlvol >>> Delete volume<br> </li>			
			</ul>
			<ul>			
			<li>Attach Volume on AWS and mount on linux:<br>
			  &ensp;&ensp;&ensp;* /var/lib/docker/volumes/ >>>>> default location of the volumes in case required<br>		
			  &ensp;&ensp;&ensp;* docker system df  >>>>> Check for the volume size <em style="color:Red;">Reference : <b>Volume_3</b></em><br>	</li>			  
			</ul>
			<ul>
			<li>Create New Volume on AWS >>>>> Create AWS EBS<br>		
			  &ensp;&ensp;&ensp;* Attach the storage with the instance<br>
			  &ensp;&ensp;&ensp;* lsblk  >>>>> list the volume attched on instance<br>
              &ensp;&ensp;&ensp;* lsblk  >>>>> list the volume attched on instance<br>	
              &ensp;&ensp;&ensp;* mkfs.xfs /dev/xvdf >>>>> Format disk space <a href="XFS_Filesystem.html"><em style="color:Green;"><b>xfs</a></b></em><br>	
			  &ensp;&ensp;&ensp;* mount /dev/xvdf /val1/ >>>>> Mount volume<br>
			  &ensp;&ensp;&ensp;* df -TH /val1<br>
			  &ensp;&ensp;&ensp;* setenforce 0<br>		
			  &ensp;&ensp;&ensp;* docker run -it -v /var1:/opt --name=testcon centos:7<br>	
			  &ensp;&ensp;&ensp;* docker volume ls<br>	
			  &ensp;&ensp;&ensp;* docker system df<br>	</li>		  
			</ul>
			<ul>
			<li>Notes :<br>		
			  &ensp;&ensp;&ensp;<em style="color:Red;"><b>* docker system prune >>>>> Delete container, networks, images</b></em><br>	</li>		  
			</ul>

		
	</td>
	<td style="width:20%">
	<p><strong><b>docker_6:</b></strong></p>
	<img src="images\docker_6.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Volume_1:</b></strong></p>
	<img src="images\Volume_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Volume_2:</b></strong></p>
	<img src="images\Volume_2.PNG" alt="cluster" width="500" height="250">	
	<p><strong><b>Volume_3:</b></strong></p>
	<img src="images\Volume_3.PNG" alt="cluster" width="500" height="250"></td>	
  </tr>
  <tr>
    <td>7</td>
    <td>docker images file</td>
    <td><ul>	
			<li>Images Build Process:<br>
			    &ensp;&ensp;&ensp;* Manual<br>
				&ensp;&ensp;&ensp;* dockerfile<br></li>
				<li>How to write Docker file :</li>
				<table style="width:100%">
				<tr>
				<th>S No</th>
				<th>Parameter</th> 
				<th>Value</th>
				<th>Example</th>
				<th>Description</th>
				</tr>
				  <tr>
					<td>0</td>
					<td>s</td>
					<td>x</td>
					<td>s</td>					
					</tr>
					<tr>
					<td>1</td>
					<td>FROM</td>
					<td>debian</td>	
					<td>Base Image refrence</td>
                    <td>Image_1</td>					
					</tr> 
					<td>2</td>
					<td>MANITAINER</td>
					<td>email/authername</td>	
					<td>Optional: Free text</td>	
					<td>Image_1</td>					
					</tr>					
					<tr>
					<td>3</td>
					<td>RUN</td>
					<td></td>	
					<td>Command need to execute</td>
					<td>Image_1</td>					
					</tr>
					<tr>															
					<td>4</td>
					<td>ADD</td>
					<td></td>	
					<td>lets you do that too, but it also supports 2 other sources. First, you can use a URL instead of a local file / directory.</td>
					<td>Image_1</td>					
					</tr>	
					<tr>					
					<td>5</td>
					<td>COPY</td>
					<td></td>	
					<td>copy in a local file or directory from your host </td>
					<td>Image_1</td>					
					</tr>
					<tr>					
					<td>6</td>
					<td>EXPOSE</td>
					<td></td>
					<td>Expose to the port</td>	
					<td>Image_1</td>					
					<td></td>
					</tr>
					<tr>					
					<td>7</td>
					<td>WORKDIR</td>
					<td></td>	
					<td>Change to the working directory</td>
					<td>Image_1</td>					
					</tr>
					<tr>					
					<td>8</td>
					<td>USER</td>
					<td></td>
					<td>Define process on the container run by user</td>	
					<td>Image_1</td>					
					</tr>
					<tr>					
                    <td>9</td>
					<td>ENV</td>
					<td></td>
					<td>Value which are comman and repeated multiple times in dockerfile  (Varible)</td>	
					<td>Image_1</td>					
					</tr>	
					<tr>						
					<td>10</td>
					<td>CMD</td>
					<td></td>
					<td>procsses under the CMD command would start when container starts</td>	
					<td>Image_1</td>					
					</tr>
					<tr>						
					<td>11</td>
					<td>ENTRYPOINT</td>
					<td></td>
					<td>it basically to execute shell file on creation/booting time of container</td>	
					<td>Image_1</td>					
					</tr>
					<tr>						
					<td>12</td>
					<td>VOLUME</td>
					<td></td>
					<td>Its use to mount volume during the creation of container</td>	
					<td>Image_3</td>					
					</tr>
					</ul>					
				</table>
       		<li>docker build -t mysql:5.6 .	</li>
			<li>docker run -d -P --name=mysql --(Image)--</li>
			
	</td>
	<td style="width:20%">
	<p><strong><b>Image_1 :</b></strong></p>	
	<img src="images\Image_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Image_2 :</b></strong></p>
	<img src="images\Image_2.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Image_3 :</b></strong></p>
	<img src="images\Image_3.PNG" alt="cluster" width="500" height="250">	
	</td>
  </tr>
  <tr>
    <td>8</td>
    <td>docker Network</td>
    <td><br>
	<ul>
			<li>Docker Container by default works bridge network concept.Its seprate network for container >>> <em style="color:Red;"><b>Network_2</b></em><br>
			    &ensp;&ensp;&ensp;* docker network ls >> list network<br>
				&ensp;&ensp;&ensp;* docker network inspect bridge >> inspect knowledge about the bridge<br>
				&ensp;&ensp;&ensp;* ifconfig docker0 >> docker external port to communicate external host >>> Network_1<br>
			</li>
			</ul>
			<ul>
			<li>How to setup custom bridge:</li>
			    &ensp;&ensp;&ensp;* docker network create --subnet 192.168.10.0/24 --driver bridge dev >> Creating bridge with the name of dev<br>
				&ensp;&ensp;&ensp;* docker network ls >> List bridge<br>	
				&ensp;&ensp;&ensp;* docker run -it --name=con1 --network dev centos >> create docker container with the bridge dev<br>
				&ensp;&ensp;&ensp;* docker network inspect dev | grep -i name >> check for the container under the bridge dev<br>
				&ensp;&ensp;&ensp;* docker network connect bridge  con1 >> link container with two networks in running container<br>	
				&ensp;&ensp;&ensp;* docker network disconnect bridge  con1 >>  disconnect network container<br>		
				&ensp;&ensp;&ensp;* docker run -it --name=con2 --ip 192.168.10.10 --network dev centos >> Create docker with specific ip address<br>
				&ensp;&ensp;&ensp;* docker run -it --name=con3 --ip 192.168.10.20 --hostname=web --network dev centos >> Create docker with specific ip address and hostname<br>				
		</ul>
		<li>How to use Host Network rather than bridge:</li>
			    &ensp;&ensp;&ensp;* netstat -tnlp | grep -w 80  >>> check for the port 80 in use on base system<br>
				&ensp;&ensp;&ensp;* docker run -d --name=webserver1 --network=host ngenx:latest<br>
			</ul>
	</td>
	<td style="width:20%">
	<p><strong><b>Network_1 :</b></strong></p>
	<img src="images\Network_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Network_2 :</b></strong></p>
	<img src="images\Network_2.PNG" alt="cluster" width="500" height="250">
  </tr> 
 <tr>
    <td>9</td>
    <td>docker Compose (Provisioning of containers): use to run repeated commands to build containers</td>
    <td><br>
	<ul>
			<li>List of compose commands: <br>
			    &ensp;&ensp;&ensp;* Docker inspect -(Container Name)-<br>
				&ensp;&ensp;&ensp;* Install docker "sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /bin/docker-compose"<br>
				&ensp;&ensp;&ensp;* chmod u+x /bin/docker-compose<br>
				&ensp;&ensp;&ensp;* docker compose version<br>
				&ensp;&ensp;&ensp;* mkdir demo<br>
				&ensp;&ensp;&ensp;* vim docker-compose.yaml >>>> Create compse file with the name docker-compose  <em style="color:Red;"><b>compose_1</b></em><br>
				&ensp;&ensp;&ensp;* docker-compose up -d<br>
				&ensp;&ensp;&ensp;* docker-compose ps<br>
				&ensp;&ensp;&ensp;* docker-compose stop >>> use to stop in the same dir where docker-compose.yaml file exist<br>
				&ensp;&ensp;&ensp;* docker-compose start >>> use to run in the same dir where docker-compose.yaml file exist<br>
				&ensp;&ensp;&ensp;* docker-compose rm >>> remove container create from docker-compose.yaml<br>
				&ensp;&ensp;&ensp;* vim docker-compose.yaml >>> example >>><em style="color:Red;"><b>compose_2</b></em><br>
				&ensp;&ensp;&ensp;* docker network ls>>> docker always creates its own seprate network<br>
				&ensp;&ensp;&ensp;* docker inspect network wordpress | grep -i subnet<br>
				&ensp;&ensp;&ensp;* docker-compose down >>> stop and delete in single command<br>
				&ensp;&ensp;&ensp;* Create custom network with docker-compose for containers >>> example >>><em style="color:Red;"><b>compose_3 and compose_4</b></em><br>
				&ensp;&ensp;&ensp;* Use docker-compose with dockerfile<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* Create dockerfile with follwing refrence:<em style="color:Red;"><b>compose_5</b></em><br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* Create Source file with follwing refrence:<em style="color:Red;"><b>compose_6</b></em><br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* Create docker-compose with follwing refrence:<em style="color:Red;"><b>compose_7</b></em><br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker-compose up -d<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker-compose up -d --build >>>> implement changes in source<br>
			</li>

			</ul>
		
	</td>
	<td style="width:20%">
	<p><strong><b>compose_1 :</b></strong></p>
	<img src="images\OverlayFS_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>compose_2 :</b></strong></p>
	<img src="images\compose_2.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>compose_3 :</b></strong></p>
	<img src="images\compose_3.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>compose_4 :</b></strong></p>
	<img src="images\compose_4.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>compose_5 :</b></strong></p>
	<img src="images\compose_5.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>compose_6 :</b></strong></p>
	<img src="images\compose_6.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>compose_7 :</b></strong></p>
	<img src="images\compose_7.PNG" alt="cluster" width="500" height="250">
  </tr>   
  <tr>
    <td>10</td>
    <td>Docker Registry</td>
    <td><br>
	<ul>
			<li>Registry Server:<br>
			    &ensp;&ensp;&ensp;* Community based<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker  : docker.io or docker.hub<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* redhat  : registry.access.redhat.com<br>				
				&ensp;&ensp;&ensp;* Custom registry<br>
			</li>
			</ul>
	<ul>
			<li>Docker hub:<br>
			    &ensp;&ensp;&ensp;* docker search nginx  >>> list all images in docker hub<br>
				&ensp;&ensp;&ensp;* docker search nginx  >>> push the custom image<br>
				&ensp;&ensp;&ensp;* vim /etc/container/registries.conf  >>> configuration for Community Registry<em style="color:Red;"><b>registries_1</b></em><br>
				&ensp;&ensp;&ensp;* Create registry on docker hub<br>
				&ensp;&ensp;&ensp;* docker tag --(IMAGE ID)-- docker.io/shashipau/jboss:latest<br>
				&ensp;&ensp;&ensp;* docker login<br>
				&ensp;&ensp;&ensp;* docker push shashipau/jboss:latest<br>
				&ensp;&ensp;&ensp;* docker search shashipau<br>

			</li>
			</ul>
			<ul>
			<li>Manual create docker backup:<br>
				&ensp;&ensp;&ensp;* docker save --(IMAGE ID)-- > shashi.tar >>>> save the image for further use<br>
				&ensp;&ensp;&ensp;* docker load -i shashi.tar >>>> load the saved image<br>			
		</li>
	</ul>
	<ul>
			<li>Custom registry:<br>
                &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* VM Registry Server<br>	
                &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* Container Registry Server<br>					
			</li>
			</ul>
			<ul>
			<li>VM Registry Server:<br>
			    &ensp;&ensp;&ensp;* hostnamectl set-hostname registry-server<br>
			    &ensp;&ensp;&ensp;* bash<br>
				&ensp;&ensp;&ensp;* yum install docker-distribution -y<br>
				&ensp;&ensp;&ensp;* systemctl start docker-distribution<br>
				&ensp;&ensp;&ensp;* systemctl enable docker-distribution<br>
				&ensp;&ensp;&ensp;* netstat -tnIp | grep -w 5000   >>> default port for registry<br>
				&ensp;&ensp;&ensp;* ls -ld /var/lib/registry  >>> default location of registry<br>
				&ensp;&ensp;&ensp;* vim /etc/docker/daemon.json  >>> make location of registry server<br>
				&ensp;&ensp;&ensp;* {"insecure-registries":["172.0.0.92:5000"]}  >>> Create entry in file for non https request for push<br>
				&ensp;&ensp;&ensp;* systemctl restart docker<br>
				&ensp;&ensp;&ensp;&ensp;* push image into local docker-distribution<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker tag --(IMAGE ID)-- 172.0.0.92:5000/apache.local <em style="color:Red;"><b>distribution_1</b></em><br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker push 172.0.0.92:5000/apache.local <em style="color:Red;"><b>distribution_1</b></em><br>
				&ensp;&ensp;&ensp;&ensp;* Import image into local docker-distribution<br>
				&ensp;&ensp;&ensp;&ensp;* vim /etc/docker/daemon.json  >>> make location of registry server<br>
				&ensp;&ensp;&ensp;&ensp;* {"insecure-registries":["172.0.0.92:5000"]}  >>> Create entry in file for non https request for import<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker pull 172.0.0.92:5000/apache.local<br>
				&ensp;&ensp;&ensp;* systemctl stop docker-distribution<br>
				&ensp;&ensp;&ensp;* systemctl disable docker-distribution<br>
				&ensp;&ensp;&ensp;* yum remove docker-distribution -y<br>
			</li>
			</ul>
			<ul>
			<li>Container Registry Server:<br>
			    &ensp;&ensp;&ensp;* yum install docker -y<br>
				&ensp;&ensp;&ensp;* systemctl start docker<br>
				&ensp;&ensp;&ensp;* systemctl disable docker<br>
				&ensp;&ensp;&ensp;* docker pull registry:2<br>
				&ensp;&ensp;&ensp;* docker volume create vol1<br>
				&ensp;&ensp;&ensp;* docker run -d -v vol1:/var/lib/registry -p 5000:5000 --ame=registry registry:2<br>
				&ensp;&ensp;&ensp;* docker ps<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker tag --(IMAGE ID)-- 172.0.0.92:5000/apache.local<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* docker push 172.0.0.92:5000/apache.local<br>
				&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;* ls /var/lib/registry/docker/registry/v2/repositories/<em style="color:Red;"><b>distribution_2</b></em><br>
			    
			</li>
			</ul>
			<ul>
			<li>Create Certificate<em style="color:Red;"><b>Certificate_1 and Certificate_2</b></em></li>
			<li>Create certificate Container Registry<em style="color:Red;"><b>registries_3</b></em></li>
			</ul>
	</td>
	<td style="width:20%">
	<p><strong><b>distribution_1 :</b></strong></p>
	<img src="images\distribution_1.PNG" alt="cluster" width="500" height="50">
	<p><strong><b>registries_3 :</b></strong></p>
	<img src="images\registries_3.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Certificate_1 :</b></strong></p>
	<img src="images\Certificate_1.PNG" alt="cluster" width="500" height="250">
	<p><strong><b>Certificate_2 :</b></strong></p>
	<img src="images\Certificate_2.PNG" alt="cluster" width="500" height="250">
  </tr>    
</table>

</body>
</html>
